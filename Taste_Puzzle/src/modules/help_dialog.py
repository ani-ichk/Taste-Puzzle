import os
import sys
from PyQt6.QtWidgets import (QDialog, QVBoxLayout, QTextEdit, QPushButton,
                            QHBoxLayout, QLabel)
from PyQt6.QtCore import Qt
from PyQt6.QtGui import QIcon, QFont

# –î–æ–±–∞–≤–ª—è–µ–º –ø—É—Ç—å –¥–ª—è –∏–º–ø–æ—Ä—Ç–æ–≤
current_dir = os.path.dirname(os.path.abspath(__file__))
parent_dir = os.path.dirname(current_dir)
if parent_dir not in sys.path:
    sys.path.insert(0, parent_dir)


class HelpDialog(QDialog):
    """–î–∏–∞–ª–æ–≥ —Å–ø—Ä–∞–≤–∫–∏ –¥–ª—è –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è"""

    def __init__(self, parent=None):
        super().__init__(parent)
        self.init_ui()

    def init_ui(self):
        self.setWindowTitle("–°–ø—Ä–∞–≤–∫–∞ - –ü–∞–∑–ª –í–∫—É—Å–æ–≤")
        self.setFixedSize(800, 600)

        # –ù–ê–°–¢–†–û–ô–ö–ê –ò–ö–û–ù–ö–ò –û–ö–ù–ê
        current_dir = os.path.dirname(os.path.abspath(__file__))
        icon_path = os.path.join(os.path.dirname(current_dir), '..', 'img', 'icon.ico')
        if os.path.exists(icon_path):
            self.setWindowIcon(QIcon(icon_path))

        # –°–û–ó–î–ê–ù–ò–ï –û–°–ù–û–í–ù–û–ì–û LAYOUT
        layout = QVBoxLayout()
        layout.setSpacing(10)
        layout.setContentsMargins(20, 20, 20, 20)

        # –ó–ê–ì–û–õ–û–í–û–ö –°–ü–†–ê–í–ö–ò
        title_label = QLabel("üìö –°–ø—Ä–∞–≤–∫–∞ –ø–æ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—é '–ü–∞–∑–ª –í–∫—É—Å–æ–≤'")
        title_label.setStyleSheet("""
                    QLabel {
                        font-size: 18px;
                        font-weight: bold;
                        color: #2c3e50;
                        padding-bottom: 10px;
                        border-bottom: 2px solid #007bff;
                    }
                """)
        layout.addWidget(title_label)

        # –¢–ï–ö–°–¢–û–í–û–ï –ü–û–õ–ï –° –°–û–î–ï–†–ñ–ê–ù–ò–ï–ú –°–ü–†–ê–í–ö–ò
        help_text = QTextEdit()
        help_text.setReadOnly(True) # –¢–æ–ª—å–∫–æ –¥–ª—è —á—Ç–µ–Ω–∏—è
        help_text.setHtml(self.get_help_content()) # –ó–∞–≥—Ä—É–∑–∫–∞ HTML-–∫–æ–Ω—Ç–µ–Ω—Ç–∞
        help_text.setStyleSheet("""
            QTextEdit {
                background-color: white;
                border: 1px solid #dee2e6;
                border-radius: 8px;
                padding: 15px;
                font-size: 14px;
                line-height: 1.6;
            }
        """)
        layout.addWidget(help_text)

        # –ö–ù–û–ü–ö–ê –ó–ê–ö–†–´–¢–ò–Ø
        close_btn = QPushButton("–ó–∞–∫—Ä—ã—Ç—å")
        close_btn.setStyleSheet("""
            QPushButton {
                background-color: #6c757d;
                color: white;
                padding: 10px 20px;
                border-radius: 4px;
                font-weight: bold;
            }
            QPushButton:hover {
                background-color: #5a6268;
            }
        """)
        close_btn.clicked.connect(self.close) # –ó–∞–∫—Ä—ã—Ç–∏–µ –æ–∫–Ω–∞ –ø—Ä–∏ –∫–ª–∏–∫–µ
        layout.addWidget(close_btn, alignment=Qt.AlignmentFlag.AlignCenter)

        self.setLayout(layout)

    def get_help_content(self):
        """–í–æ–∑–≤—Ä–∞—â–∞–µ—Ç HTML-—Å–æ–¥–µ—Ä–∂–∏–º–æ–µ —Å–ø—Ä–∞–≤–∫–∏"""
        return """
        <h2>–î–æ–±—Ä–æ –ø–æ–∂–∞–ª–æ–≤–∞—Ç—å –≤ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ "–ü–∞–∑–ª –í–∫—É—Å–æ–≤"! üçΩÔ∏è</h2>

        <h3>üìñ –†–∞–∑–¥–µ–ª —Ä–µ—Ü–µ–ø—Ç–æ–≤</h3>
        <ul>
            <li><b>–ü—Ä–æ—Å–º–æ—Ç—Ä —Ä–µ—Ü–µ–ø—Ç–æ–≤:</b> –î–≤–∞–∂–¥—ã —â–µ–ª–∫–Ω–∏—Ç–µ –ø–æ –∫–∞—Ä—Ç–æ—á–∫–µ —Ä–µ—Ü–µ–ø—Ç–∞, —á—Ç–æ–±—ã –æ—Ç–∫—Ä—ã—Ç—å –ø–æ–¥—Ä–æ–±–Ω—É—é –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—é</li>
            <li><b>–î–æ–±–∞–≤–ª–µ–Ω–∏–µ —Ä–µ—Ü–µ–ø—Ç–∞:</b> –ù–∞–∂–º–∏—Ç–µ –∫–Ω–æ–ø–∫—É "‚ûï –î–æ–±–∞–≤–∏—Ç—å —Ä–µ—Ü–µ–ø—Ç" –¥–ª—è —Å–æ–∑–¥–∞–Ω–∏—è –Ω–æ–≤–æ–≥–æ —Ä–µ—Ü–µ–ø—Ç–∞</li>
            <li><b>–§–∏–ª—å—Ç—Ä–∞—Ü–∏—è:</b> –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ —Ñ–∏–ª—å—Ç—Ä—ã –¥–ª—è –ø–æ–∏—Å–∫–∞ —Ä–µ—Ü–µ–ø—Ç–æ–≤ –ø–æ –∫–∞—Ç–µ–≥–æ—Ä–∏—è–º, –≤—Ä–µ–º–µ–Ω–∏ –ø—Ä–∏–≥–æ—Ç–æ–≤–ª–µ–Ω–∏—è –∏ –∏–Ω–≥—Ä–µ–¥–∏–µ–Ω—Ç–∞–º</li>
            <li><b>–ò–∑–±—Ä–∞–Ω–Ω–æ–µ:</b> –ù–∞–∂–º–∏—Ç–µ –Ω–∞ ‚ù§Ô∏è –≤ –∫–∞—Ä—Ç–æ—á–∫–µ —Ä–µ—Ü–µ–ø—Ç–∞, —á—Ç–æ–±—ã –¥–æ–±–∞–≤–∏—Ç—å –µ–≥–æ –≤ –∏–∑–±—Ä–∞–Ω–Ω–æ–µ</li>
        </ul>

        <h3>üë§ –†–∞–∑–¥–µ–ª –ø—Ä–æ—Ñ–∏–ª—è</h3>
        <ul>
            <li><b>–°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞:</b> –ü—Ä–æ—Å–º–∞—Ç—Ä–∏–≤–∞–π—Ç–µ –≤–∞—à—É –∞–∫—Ç–∏–≤–Ω–æ—Å—Ç—å –≤ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–∏</li>
            <li><b>–ò–∑–±—Ä–∞–Ω–Ω–æ–µ:</b> –í—Å–µ —Ä–µ—Ü–µ–ø—Ç—ã, –∫–æ—Ç–æ—Ä—ã–µ –≤—ã –¥–æ–±–∞–≤–∏–ª–∏ –≤ –∏–∑–±—Ä–∞–Ω–Ω–æ–µ</li>
            <li><b>–ü—Ä–∏–≥–æ—Ç–æ–≤–ª–µ–Ω–Ω—ã–µ:</b> –ò—Å—Ç–æ—Ä–∏—è —Ä–µ—Ü–µ–ø—Ç–æ–≤, –∫–æ—Ç–æ—Ä—ã–µ –≤—ã —É–∂–µ –ø—Ä–∏–≥–æ—Ç–æ–≤–∏–ª–∏</li>
            <li><b>–í—ã—Ö–æ–¥:</b> –ù–∞–∂–º–∏—Ç–µ –∫–Ω–æ–ø–∫—É "üö™ –í—ã–π—Ç–∏ –∏–∑ –∞–∫–∫–∞—É–Ω—Ç–∞" –¥–ª—è –∑–∞–≤–µ—Ä—à–µ–Ω–∏—è —Å–µ–∞–Ω—Å–∞</li>
        </ul>

        <h3>üõí –†–∞–∑–¥–µ–ª –∫–æ—Ä–∑–∏–Ω—ã</h3>
        <ul>
            <li><b>–î–æ–±–∞–≤–ª–µ–Ω–∏–µ –∏–Ω–≥—Ä–µ–¥–∏–µ–Ω—Ç–æ–≤:</b> –ù–∞–∂–º–∏—Ç–µ "‚ûï –î–æ–±–∞–≤–∏—Ç—å –∏–Ω–≥—Ä–µ–¥–∏–µ–Ω—Ç" –∏–ª–∏ –¥–æ–±–∞–≤–ª—è–π—Ç–µ –∏–Ω–≥—Ä–µ–¥–∏–µ–Ω—Ç—ã –ø—Ä—è–º–æ –∏–∑ —Ä–µ—Ü–µ–ø—Ç–æ–≤</li>
            <li><b>–£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ:</b> –í—ã–¥–µ–ª—è–π—Ç–µ —ç–ª–µ–º–µ–Ω—Ç—ã —á–µ–∫–±–æ–∫—Å–∞–º–∏ –∏ —É–¥–∞–ª—è–π—Ç–µ –≤—ã–±—Ä–∞–Ω–Ω—ã–µ</li>
            <li><b>–≠–∫—Å–ø–æ—Ä—Ç:</b> –°–æ—Ö—Ä–∞–Ω—è–π—Ç–µ —Å–ø–∏—Å–æ–∫ –ø–æ–∫—É–ø–æ–∫ –≤ —Ç–µ–∫—Å—Ç–æ–≤—ã–π —Ñ–∞–π–ª –¥–ª—è –ø–æ—Ö–æ–¥–∞ –≤ –º–∞–≥–∞–∑–∏–Ω</li>
            <li><b>–û—á–∏—Å—Ç–∫–∞:</b> –ù–∞–∂–º–∏—Ç–µ "üóëÔ∏è –û—á–∏—Å—Ç–∏—Ç—å –∫–æ—Ä–∑–∏–Ω—É" –¥–ª—è —É–¥–∞–ª–µ–Ω–∏—è –≤—Å–µ—Ö —ç–ª–µ–º–µ–Ω—Ç–æ–≤</li>
        </ul>

        <h3>‚öôÔ∏è –ù–∞—Å—Ç—Ä–æ–π–∫–∏ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è</h3>
        <ul>
            <li><b>–®—Ä–∏—Ñ—Ç:</b> –ù–∞—Å—Ç—Ä–æ–π—Ç–µ —Ä–∞–∑–º–µ—Ä —à—Ä–∏—Ñ—Ç–∞ –¥–ª—è —É–¥–æ–±–Ω–æ–≥–æ —á—Ç–µ–Ω–∏—è</li>
            <li><b>–ê–≤—Ç–æ–≤—Ö–æ–¥:</b> –í–∫–ª—é—á–∏—Ç–µ –æ–ø—Ü–∏—é "–ó–∞–ø–æ–º–Ω–∏—Ç—å –º–µ–Ω—è" –¥–ª—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–≥–æ –≤—Ö–æ–¥–∞</li>
            <li><b>–í–Ω–µ—à–Ω–∏–π –≤–∏–¥:</b> –ù–∞—Å—Ç—Ä–æ–π—Ç–µ –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–µ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–π –∏ –∫–æ–º–ø–∞–∫—Ç–Ω–æ—Å—Ç—å –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å–∞</li>
        </ul>

        <hr>
        <p style="color: #666; font-size: 12px; margin-top: 20px;">
        <b>–í–µ—Ä—Å–∏—è –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è:</b> 1.0.0<br>
        <b>–ü–æ–¥–¥–µ—Ä–∂–∫–∞:</b> –ï—Å–ª–∏ —É –≤–∞—Å –≤–æ–∑–Ω–∏–∫–ª–∏ –ø—Ä–æ–±–ª–µ–º—ã, –ø—Ä–æ–≤–µ—Ä—å—Ç–µ —Ä–∞–∑–¥–µ–ª "–û –ø—Ä–æ–≥—Ä–∞–º–º–µ" –≤ –Ω–∞—Å—Ç—Ä–æ–π–∫–∞—Ö.<br>
        ¬© 2025 –ü–∞–∑–ª –í–∫—É—Å–æ–≤
        </p>
        """